\section{Related Works}\label{relatedworks}

The Optimized Exchange Protocol (IEEE 11073-20601) is the core of X73-PHD family. It defines the communication syntax in the Domain Information Model (DIM), machine states and services types in the Service Model and procedures in the Communication Model. 

The Domain Information Model defines all common classes and data types used by device types. These classes are expanded by the specialization profiles according to the needs of each device. The Service Model defines the types of messages that can be exchanged between an agent and a manager and the conceptual context in which they are being transmitted \cite{b17}. The communication model defines the procedures to be followed under a normal operation, an exit condition, or when an error occurs.

The 11073 family of standards includes specialization profiles, that is, each agent has an associated standard that describes its data representation. For example, the standard 11073-10408 sets standards for a thermometer, and the 11073-10415 for a balance. These specialization defines the DIM of each device, its attributes, methods, and events of each agent class.

Antidote Stack or Antidote Library is an implementation of the Optimized Exchange Protocol (IEEE 11073-20601) developed by Signove as part of the SigHealth Platform \footnote{SigHealth is a platform for remote patient monitoring and data management using personal wireless devices for health.}. 
%This library is the first open source implementation of this standard, and was developed in ANSI-C with modular architecture, which allows code portability for different platforms. 

%With the popularization of the 11073 standard, several improvements were proposed to enhance the operation and interoperability. 
In \cite{b7},\cite{b8} and \cite{b9} the integration of X73-PHD and IoT protocols, such as MQTT and COaP, are proposed to be used as transport protocols, enabling personal health devices to share health information directly through the Internet, using low power consumption and few control messages. Those works also discuss the availability of enabling IoT technologies for health information as well as the mapping of messages from X73-PHD into IoT protocols. All those works used real devices with Antidote as their application layer protocol.

Another project on 11073 standards is \cite{b11}, which has developed an interoperable end-to-end remote patient monitoring platform using ZigBee Health Care Profile as transport layer and a Machine to Machine (M2M) solution to provide wide area network connectivity. That work also includes a web application on the clinical side (server side) and use the standards and frameworks provided by Integrating the Healthcare Enterprise (IHE) \cite{b13} and Health Level Seven (HL7) \cite{b12} to ensure end-to-end interoperability. Those two companies advocate a world in which everyone can securely access and use the right health data when and where they need it.

The X73-PoC version provides a mechanism to remotely control agents. This mechanism is defined in the standards X73-10201 and X73-20301. However, the X73-PHD has no mechanisms to do such a thing. So, in \cite{b14} the author proposes to adapt the remote control capabilities from X73-PoC to X73-PHD with an acceptable overhead and no extra cost to manufacturers. This mechanism has to be installed in manager and agents, and the remote control consists of being able to change the units of measurements (e.g. - changing from kilograms to pounds) directly from the manager, a smartphone or a computer engine in nursing units.

In this work, we use the Antidote library to run the agent and manager X73-PHD stack over Castalia. Five different device profiles are used: 11073-10406 Basic electrocardiograph (1 to 3 lead ECG), 11073-10404 Pulse oximeter, 11073-10408 Thermometer, 11073-10417 Glucose meter, and 11073-10407 Blood pressure monitor. All these agents are used to represent body sensors in WBAN simulations. To fulfill that purpose, the X73-PHD reliable data transfer mechanism was adjusted to work on a WBAN scenario, a wireless environment, with a faulty media, and lacking transport layer services.

%VINICIUS - Eu tirei pra deixar o cap√≠tulo todo mais focado em PHD%
%In \cite{b6} the authors presents an open-source energy-harvesting simulation framework called GreenCastalia which supports multi-source and multi-storage energy harvesting architectures developed for the Castalia simulator. GreenCastalia project focus is to simulate realistic battery discharge on devices. The majors modifications to the original Castalia code was made to the Resource Manager module. Also in this module the authors adds the energy-harvesting systems that provides a more realistic battery model.